{
  "name": "recall-optimization",
  "description": "召回精准度优化：调研、设计、实现、评估",
  "createdAt": 1772373425610,
  "leadAgentId": "team-lead@recall-optimization",
  "leadSessionId": "946412f7-66ad-426d-8173-31949f48f814",
  "members": [
    {
      "agentId": "team-lead@recall-optimization",
      "name": "team-lead",
      "agentType": "general-purpose",
      "model": "MiniMax-M2.1",
      "joinedAt": 1772373425610,
      "tmuxPaneId": "",
      "cwd": "/Volumes/data/working/life/memory",
      "subscriptions": []
    },
    {
      "agentId": "implementer@recall-optimization",
      "name": "implementer",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "你是实现 Agent，负责将调研方案落地实施。\n\n## 调研结论（来自 researcher）\n\n### 推荐优化方案（按优先级）\n\n| 优先级 | 优化项 | 预期提升 |\n|--------|--------|----------|\n| **1** | ChromaDB 改用余弦相似度 | 5-10% |\n| **2** | 添加 Rerank (bge-reranker-base) | 10-15% |\n\n### 实施步骤\n\n#### 步骤 1: ChromaDB 改用余弦相似度\n\n修改 `src/memory/storage/chroma.py`，在创建 collection 时添加 `hnsw_space` 参数：\n\n```python\ncollection = self._client.get_or_create_collection(\n    name=collection_name,\n    metadata={\n        \"repository_id\": str(repository_id),\n        \"hnsw_space\": \"cosine\",  # 添加这一行\n    },\n)\n```\n\n同时修改分数计算逻辑，使用余弦相似度（ChromaDB 原生支持）。\n\n#### 步骤 2: 添加 Rerank Provider\n\n1. 在 `src/memory/providers/` 下创建 `rerank.py`\n2. 实现 BGE Rerank Provider（使用 sentence-transformers 的 CrossEncoder）\n3. 在 `src/memory/providers/__init__.py` 导出\n4. 在 `src/memory/config/schema.py` 添加 RerankConfig\n5. 在 QueryPipeline 中集成两阶段检索\n\n## 项目路径\n/Volumes/data/working/life/memory\n\n## 你的任务\n1. 先读取相关代码文件，理解现有实现\n2. 实施 ChromaDB 余弦相似度改造\n3. 添加 Rerank Provider\n4. 修改 QueryPipeline 支持两阶段检索\n5. 确保代码可以运行\n\n请开始实施。",
      "color": "yellow",
      "planModeRequired": false,
      "joinedAt": 1772374306730,
      "tmuxPaneId": "%4",
      "cwd": "/Volumes/data/working/life/memory",
      "subscriptions": [],
      "backendType": "tmux",
      "isActive": false
    },
    {
      "agentId": "implementer-2@recall-optimization",
      "name": "implementer-2",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "继续完成 ChromaDB 余弦相似度改造和 Rerank Provider 的实现。\n\n项目路径: /Volumes/data/working/life/memory\n\n请先读取以下文件了解现有实现：\n1. src/memory/storage/chroma.py\n2. src/memory/providers/base.py\n3. src/memory/pipelines/query.py\n4. src/memory/config/schema.py\n\n然后实施：\n1. 修改 chroma.py 使用余弦相似度\n2. 创建 rerank.py provider\n3. 修改 QueryPipeline 支持 Rerank",
      "color": "purple",
      "planModeRequired": false,
      "joinedAt": 1772374777050,
      "tmuxPaneId": "%5",
      "cwd": "/Volumes/data/working/life/memory",
      "subscriptions": [],
      "backendType": "tmux",
      "isActive": false
    },
    {
      "agentId": "implementer-3@recall-optimization",
      "name": "implementer-3",
      "agentType": "general-purpose",
      "model": "claude-opus-4-6",
      "prompt": "请直接开始实施优化方案，不要等待确认。\n\n项目路径: /Volumes/data/working/life/memory\n\n需要完成的任务：\n1. 修改 src/memory/storage/chroma.py，将 hnsw_space 改为 \"cosine\"\n2. 创建 src/memory/providers/rerank.py，实现 BGE Rerank Provider\n3. 修改 src/memory/pipelines/query.py，添加 Rerank 支持\n4. 修改 src/memory/config/schema.py，添加 rerank 配置\n\n先读取这些文件，然后直接修改。\n\n如果遇到问题需要澄清，可以继续提问。",
      "color": "orange",
      "planModeRequired": false,
      "joinedAt": 1772374996848,
      "tmuxPaneId": "%6",
      "cwd": "/Volumes/data/working/life/memory",
      "subscriptions": [],
      "backendType": "tmux",
      "isActive": true
    }
  ]
}